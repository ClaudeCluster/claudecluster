# Local Development Configuration\n\nThis guide covers setting up ClaudeCluster for local development.\n\n## Required Configuration\n\n### Environment Variables\n\n**MCP Server:**\n```bash\n# Server configuration\nCLAUDECLUSTER_MCP_SERVER_HOST=localhost\nCLAUDECLUSTER_MCP_SERVER_PORT=3000\n\n# Worker endpoints (at least one required)\nCLAUDECLUSTER_MCP_WORKERS_ENDPOINTS='[\"http://localhost:3001\"]'\n\n# Logging\nCLAUDECLUSTER_MCP_LOGGING_LEVEL=debug\nCLAUDECLUSTER_MCP_LOGGING_FORMAT=simple\n```\n\n**Worker:**\n```bash\n# Server configuration\nCLAUDECLUSTER_WORKER_SERVER_HOST=localhost\nCLAUDECLUSTER_WORKER_SERVER_PORT=3001\n\n# Worker identification\nCLAUDECLUSTER_WORKER_WORKER_ID=worker-1\n\n# Capabilities\nCLAUDECLUSTER_WORKER_WORKER_CAPABILITIES_MAXCONCURRENTTASKS=1\n\n# Logging\nCLAUDECLUSTER_WORKER_LOGGING_LEVEL=debug\n```\n\n**CLI:**\n```bash\n# Server connection\nCLAUDECLUSTER_CLI_SERVER_URL=http://localhost:3000\nCLAUDECLUSTER_CLI_SERVER_TIMEOUT=30000\n\n# Defaults\nCLAUDECLUSTER_CLI_DEFAULTS_PRIORITY=5\nCLAUDECLUSTER_CLI_DEFAULTS_TIMEOUT=300\n\n# Logging\nCLAUDECLUSTER_CLI_LOGGING_LEVEL=info\n```\n\n### Configuration Files\n\n**Project Root `.env` File:**\n```bash\n# Copy from packages/shared/examples/.env.example\ncp packages/shared/examples/.env.example .env\n\n# Edit as needed\nvim .env\n```\n\n**Optional: `claudecluster.config.json`**\n```json\n{\n  \"server\": {\n    \"url\": \"http://localhost:3000\"\n  },\n  \"logging\": {\n    \"level\": \"debug\",\n    \"format\": \"simple\"\n  },\n  \"defaults\": {\n    \"priority\": 5,\n    \"timeout\": 300\n  }\n}\n```\n\n## Directory Structure\n\n```\nmy-project/\n├── .env                           # Environment variables\n├── claudecluster.config.json      # Optional config file\n├── .claudecluster/               # Runtime data directory\n│   ├── logs/                     # Log files\n│   └── temp/                     # Temporary files\n└── ...\n```\n\n## Startup Sequence\n\n1. **Start MCP Server:**\n   ```bash\n   cd packages/mcp\n   npm run dev\n   # Server starts at http://localhost:3000\n   ```\n\n2. **Start Worker(s):**\n   ```bash\n   cd packages/worker\n   npm run dev\n   # Worker starts at http://localhost:3001\n   ```\n\n3. **Verify Setup:**\n   ```bash\n   cd packages/cli\n   npm run build\n   ./dist/cli.js status\n   ```\n\n## Development Features\n\n### Hot Reloading\n\nUse `npm run dev` in each package for automatic rebuilding:\n\n```bash\n# Terminal 1 - MCP Server\ncd packages/mcp && npm run dev\n\n# Terminal 2 - Worker\ncd packages/worker && npm run dev\n\n# Terminal 3 - CLI Development\ncd packages/cli && npm run dev\n```\n\n### Debug Logging\n\nEnable detailed logging for troubleshooting:\n\n```bash\n# Enable debug logs for all components\nexport CLAUDECLUSTER_LOGGING_LEVEL=debug\n\n# Or component-specific debug logs\nexport CLAUDECLUSTER_MCP_LOGGING_LEVEL=debug\nexport CLAUDECLUSTER_WORKER_LOGGING_LEVEL=debug\nexport CLAUDECLUSTER_CLI_LOGGING_LEVEL=debug\n```\n\n### Testing Configuration\n\nTest configuration loading:\n\n```bash\n# Test CLI configuration\nclaudecluster status --verbose\n\n# Test with override\nclaudecluster status --server http://localhost:4000 --verbose\n\n# Test with debug logging\nclaudecluster run \"test task\" --verbose\n```\n\n## Common Issues\n\n### Port Conflicts\n\nIf default ports are in use, change them:\n\n```bash\n# Use different ports\nexport CLAUDECLUSTER_MCP_SERVER_PORT=3100\nexport CLAUDECLUSTER_WORKER_SERVER_PORT=3101\nexport CLAUDECLUSTER_CLI_SERVER_URL=http://localhost:3100\n```\n\n### Worker Connection Issues\n\nEnsure workers are accessible from MCP server:\n\n```bash\n# Test worker endpoint\ncurl http://localhost:3001/health\n\n# Check MCP server worker list\ncurl http://localhost:3000/workers\n```\n\n### Configuration Not Loading\n\nDebug configuration loading:\n\n```bash\n# Check which config sources are being used\nclaudecluster status --verbose --log-level debug\n\n# Verify environment variables\nenv | grep CLAUDECLUSTER\n\n# Check config file existence\nls -la claudecluster.config.*\n```\n\n## Performance Tuning\n\n### Local Development Settings\n\n```json\n{\n  \"server\": {\n    \"timeout\": 10000\n  },\n  \"workers\": {\n    \"requestTimeoutMs\": 10000,\n    \"maxRetries\": 1\n  },\n  \"monitoring\": {\n    \"heartbeatInterval\": 10000,\n    \"taskTimeout\": 60000\n  }\n}\n```\n\n### Resource Limits\n\n```bash\n# Limit concurrent tasks for development\nexport CLAUDECLUSTER_WORKER_WORKER_CAPABILITIES_MAXCONCURRENTTASKS=1\n\n# Reduce timeout for faster feedback\nexport CLAUDECLUSTER_CLI_DEFAULTS_TIMEOUT=60\n```\n\n## Next Steps\n\n- [Docker Deployment](docker-deployment.md) - Containerized development\n- [Production Setup](production.md) - Production configuration\n- [Troubleshooting](troubleshooting.md) - Common issues and solutions"